sap.ui.define(["sap/ui/core/routing/Route","sap/ui/base/EventProvider","sap/ui/core/mvc/View","sap/ui/core/Element"],function(t,e,o,n){"use strict";return t.extend("be.wl.serversiderendering.library.ServerSideRoute",{constructor:function(t,o,n,r){e.apply(this,arguments);this.owner=r;this._validateConfig(o);this._aPattern=[];this._aRoutes=[];this._oParent=n;this._oConfig=o;this._oRouter=t;const a=this;let i=o.pattern;if(!Array.isArray(i)){i=[i]}if(o.pattern===undefined){return}i.forEach(function(e,n){a._aPattern[n]=e;a._aRoutes[n]=t._oRouter.addRoute(e);a._checkRoute(a._aRoutes[n]);a._aRoutes[n].greedy=o.greedy;a._aRoutes[n].matched.add(function(){const t={};Array.from(arguments).forEach(function(e,o){t[a._aRoutes[n]._paramsIds[o]]=e});a._routeMatched(t,true)});a._aRoutes[n].switched.add(function(){a._routeSwitched()})})},_routeMatched:async function(t){const e=this._oRouter;let r;e._sRouteInProgress=null;e._stopWaitingTitleChangedFromChild();if(e._oMatchedRoute){delete e._oMatchedRoute._oConfig.dynamicTarget}e._oMatchedRoute=this;e._bMatchingProcessStarted=true;const a={...e._oConfig,...this._oConfig};const i=Object.assign({},t);i.routeConfig=a;const s={name:a.name,arguments:t,config:a};this.fireBeforeMatched(s);e.fireBeforeRouteMatched(s);let c=a.url;for(const e in t)c=c.replaceAll(`{${e}}`,t[e]);const u=await fetch(c);const d=await u.text();const h=new Promise((t,e)=>this.owner.runAsOwner(async()=>{const e=await o.create({type:"XML",definition:d});t(e)}));const f=await h;const _=n.getElementById(i.routeConfig.targetParent);await _.loaded();_.getContent()[0].removeAllPages();_.getContent()[0].addPage(f);this.fireEvent("matched",s);e.fireRouteMatched(s);if(r){this.fireEvent("patternMatched",s);e.fireRoutePatternMatched(s)}return{view:f,control:_}}})});
//# sourceMappingURL=ServerSideRoute.js.map