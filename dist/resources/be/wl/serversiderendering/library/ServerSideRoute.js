sap.ui.define(["sap/ui/core/routing/Route","sap/ui/base/EventProvider","sap/ui/core/mvc/View","sap/ui/core/Element"],function(t,e,o,n){"use strict";return t.extend("be.wl.serversiderendering.library.ServerSideRoute",{constructor:function(t,o,n,a){e.apply(this,arguments);this.owner=a;this._validateConfig(o);this._aPattern=[];this._aRoutes=[];this._oParent=n;this._oConfig=o;this._oRouter=t;const r=this;let i=o.pattern;if(!Array.isArray(i)){i=[i]}if(o.pattern===undefined){return}i.forEach(function(e,n){r._aPattern[n]=e;r._aRoutes[n]=t._oRouter.addRoute(e);r._checkRoute(r._aRoutes[n]);r._aRoutes[n].greedy=o.greedy;r._aRoutes[n].matched.add(function(){const t={};Array.from(arguments).forEach(function(e,o){t[r._aRoutes[n]._paramsIds[o]]=e});r._routeMatched(t,true)});r._aRoutes[n].switched.add(function(){r._routeSwitched()})})},_routeMatched:async function(t){const e=this._oRouter;let a;e._sRouteInProgress=null;e._stopWaitingTitleChangedFromChild();if(e._oMatchedRoute){delete e._oMatchedRoute._oConfig.dynamicTarget}e._oMatchedRoute=this;e._bMatchingProcessStarted=true;const r={...e._oConfig,...this._oConfig};const i=Object.assign({},t);i.routeConfig=r;const s={name:r.name,arguments:t,config:r};this.fireBeforeMatched(s);e.fireBeforeRouteMatched(s);let c=r.url;for(const e in t)c=c.replaceAll(`{${e}}`,t[e]);const u=await fetch(c);const d=await u.text();const h=new Promise((t,e)=>this.owner.runAsOwner(async()=>{const e=await o.create({type:"XML",definition:d});t(e)}));const f=await h;const _=await i.routeConfig.targetParent;const g=n.getElementById(_);await g.loaded();g.getContent()[0].removeAllPages();g.getContent()[0].addPage(f);this.fireEvent("matched",s);e.fireRouteMatched(s);if(a){this.fireEvent("patternMatched",s);e.fireRoutePatternMatched(s)}return{view:f,control:g}}})});
//# sourceMappingURL=ServerSideRoute.js.map