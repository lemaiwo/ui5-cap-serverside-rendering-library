sap.ui.define(["sap/ui/core/routing/Route","be/wl/serversiderendering/library/ServerSideRouter","sap/ui/base/EventProvider","sap/ui/core/mvc/View","sap/ui/core/Element"],function(e,t,o,r,n){"use strict";return e.extend("be.wl.serversiderendering.library.ServerSideRoute",{constructor:function(e,t,r,n){o.apply(this,arguments);this.owner=n;this._validateConfig(t);this._aPattern=[];this._aRoutes=[];this._oParent=r;this._oConfig=t;this._oRouter=e;const i=this;let a=t.pattern;if(!Array.isArray(a)){a=[a]}if(t.pattern===undefined){return}a.forEach(function(o,r){i._aPattern[r]=o;i._aRoutes[r]=e._oRouter.addRoute(o);i._checkRoute(i._aRoutes[r]);i._aRoutes[r].greedy=t.greedy;i._aRoutes[r].matched.add(function(){const e={};Array.from(arguments).forEach(function(t,o){e[i._aRoutes[r]._paramsIds[o]]=t});i._routeMatched(e,true)});i._aRoutes[r].switched.add(function(){i._routeSwitched()})})},_routeMatched:async function(e){const t=this._oRouter;let o;t._sRouteInProgress=null;t._stopWaitingTitleChangedFromChild();if(t._oMatchedRoute){delete t._oMatchedRoute._oConfig.dynamicTarget}t._oMatchedRoute=this;t._bMatchingProcessStarted=true;const i={...t._oConfig,...this._oConfig};const a=Object.assign({},e);a.routeConfig=i;const s={name:i.name,arguments:e,config:i};this.fireBeforeMatched(s);t.fireBeforeRouteMatched(s);let c=i.url;for(const t in e)c=c.replaceAll(`{${t}}`,e[t]);const u=await fetch(c);const d=await u.text();const h=new Promise((e,t)=>this.owner.runAsOwner(async()=>{const t=await r.create({type:"XML",definition:d});e(t)}));const f=await h;const _=n.getElementById(a.routeConfig.targetParent);await _.loaded();_.getContent()[0].removeAllPages();_.getContent()[0].addPage(f);this.fireEvent("matched",s);t.fireRouteMatched(s);if(o){this.fireEvent("patternMatched",s);t.fireRoutePatternMatched(s)}return{view:f,control:_}}})});
//# sourceMappingURL=ServerSideRoute.js.map